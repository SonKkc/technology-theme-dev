{% extends 'layouts/default.html' %}

{% block content %}
    <!-- Main-->
    <div class="main">

    {# Lấy resource đầu tiên thuộc loại WebsiteCategory để làm ví dụ #}
    {# {% set categoryResource = null %}
    {% for resource in listData.getResources() %}
        {% if resource.getModel() == 'Post' %}
            {% set categoryResource = resource %}
        {% endif %}

    {% endfor %} #}

    {# Hiển thị nút bấm nếu tìm thấy categoryResource #}
    {# {% if categoryResource %}
        <a href="{{ link_to(categoryResource) }}" class="btn btn-primary">Chuyển tới trang Category</a>
    {% else %}
        <p>Không tìm thấy resource loại WebsiteCategory.</p>
    {% endif %} #}

        <!--Lastest News-->
        {% set latestData = listData.getResources() %}
        <div class="my_container section_flex border_bot">
            <div class="outstanding">

                {% set latestData1 = latestData|slice(0, 1) %}
                {% for latestItem in latestData1 %} 
                <a href="{{ latestItem.getLink() }}" class="-items">
                    <div class="-title">
                       {{ latestItem.getTitle() }}
                    </div>
                    {% set thumbnailFile = latestItem.getThumbnailFile() %}
                    <img src="{{ thumbnailFile ? image_resize(300, thumbnailFile) }}" alt="" class="-img">
                    <div class="-content">
                        <p>{{ latestItem.getDescription() }}</p>
                    </div>
                </a>
                {% endfor %} 
            </div>

            <div class="latest-col">
                <div class="border-b-2 border-black ">
                    <span class="px-2 py-1 bg-black text-white">
                        Latest
                    </span>
                </div>
                {% set latestDataCol = latestData|slice(1, 5) %}
                {% for latestItem in latestDataCol %} 
                <a href="{{ latestItem.getLink() }}" class="-items">
                    {% set thumbnailFile = latestItem.getThumbnailFile() %}
                    <img src="{{ thumbnailFile ? image_resize(300, thumbnailFile) }}" alt="" class="">
                    <p class="-title">
                        {{ latestItem.getTitle() }}
                    </p>
                </a>
                {% endfor %}
            </div>
        </div>
        <!--latest row-->
        <div class="my_container section_grid latest-row">
            {% set latestDataRow = latestData|slice(6, 9) %}
            {% for latestItem in latestDataRow %} 
            <!--items-->
            <a href="#" class="-items">
                {% set thumbnailFile = latestItem.getThumbnailFile() %}
                <img src="{{ thumbnailFile ? image_resize(300, thumbnailFile) }}" alt="" class="">
                <p class="-title">{{ latestItem.getTitle() }} </p>
            </a>
            {% endfor %}
        </div>
    
        <!--divide-->
        <div class="divide">
            <div class="_container">
                <div class="-line1"></div>
                {% set category = WebsiteCategory.getResources() %}
                <a href="{{ link_to(category) }}" class="-text primary">See all latest news</a>
                <div class="-line2"></div>
            </div>
        </div>

        <!--newsletter-->
        <div>
            {% include 'components/news-letter.html' %}
        </div>

        <!--Category card-->
        <div>
            {% include 'components/list-card-home.html' with { resources: listData.getResources() } %}
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('{{ categoryResource.slug }}');
        });
    </script>

    
{% endblock %}